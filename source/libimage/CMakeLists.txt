PROJECT(libimage)

SET(HEADER_PATH ${CMAKE_SOURCE_DIR}/include/ray)
SET(SOURCE_PATH ${CMAKE_SOURCE_DIR}/source/libimage)

INCLUDE_DIRECTORIES(${DEPENDENCIES_PATH}/libjpeg)
INCLUDE_DIRECTORIES(${DEPENDENCIES_PATH}/libpng)

SET(COMMON_LIST
    ${HEADER_PATH}/imagtypes.h
    ${HEADER_PATH}/imagdef.h
    ${HEADER_PATH}/imaghandler.h
    ${HEADER_PATH}/image.h
)
SOURCE_GROUP("image" FILES ${COMMON_LIST})

FILE(GLOB SOURCE_LIST "*.cpp")
SOURCE_GROUP("image" FILES ${SOURCE_LIST})

ADD_LIBRARY(libimage SHARED ${COMMON_LIST} ${SOURCE_LIST})

TARGET_LINK_LIBRARIES(libimage PUBLIC libplatform)
TARGET_LINK_LIBRARIES(libimage PRIVATE libpng)
TARGET_LINK_LIBRARIES(libimage PRIVATE libjpeg)
TARGET_LINK_LIBRARIES(libimage PRIVATE zlib)
TARGET_LINK_LIBRARIES(libimage PRIVATE unzip)

SET_TARGET_ATTRIBUTE(libimage "core")

IF(MINGW OR UNIX)
    SET_TARGET_PROPERTIES(libimage PROPERTIES OUTPUT_NAME image)
ENDIF()